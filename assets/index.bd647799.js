(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&h(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function h(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();const b="/SpaceInvaders/assets/ship1.c6e0c1aa.png",O="/SpaceInvaders/assets/ship2.14f3173b.png",R="/SpaceInvaders/assets/ship3.2e642a9d.png",B=[b,O,R],f=document.querySelector("canvas"),p=f.getContext("2d");let v=.3;innerWidth<500&&(v=.2);class V{constructor(e){this.velocity=0,this.rotation=0,this.color="orange",this.opacity=1;const t=new Image;t.src=B[e],t.onload=()=>{this.width=t.width*v,this.height=t.height*v,this.image=t,this.position={x:f.width/2-this.width/2,y:f.height-this.height-20}}}draw(){p.save(),p.globalAlpha=this.opacity,p.translate(this.position.x+this.width/2,this.position.y+this.height/2),p.rotate(this.rotation),p.translate(-this.position.x-this.width/2,-this.position.y-this.height/2),p.drawImage(this.image,this.position.x,this.position.y,this.width,this.height),p.restore()}update(){this.image&&(this.draw(),this.position.x+=this.velocity)}reset(){this.width=this.image.width*v,this.height=this.image.height*v,this.position={x:f.width/2-this.width/2,y:f.height-this.height-20},this.opacity=1}}const F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAAAXNSR0IArs4c6QAAAPFJREFUWEftWNsNhDAMC/Ow/yg3z/GFBNFdXGOoRGt+aZr4kZSyxEDPMhCWmBfMJ+J7VHKNe8lQ96eUUZMhS6v7G8zO8Kttlm2i2kKNz/VQNjOYouutTEEOZbPMJBq16nt2wBiMynhrvJX5xxTqkcwcWp/zsPFIqbJnUHFsMQZzYGBeZZCtWqdQr3VZqVPPGEwvGX7kmVcZdfSqoqH8lDJoM7VYFI/yG8zOYO9p11UZdCIjG7HXcHQzLc8Zlhm2eIMpvtXGVYa1CRoIyKboSsDWQ/0DQB5HxbHgDYZloPXceZXNrpLwVJzUM08VdXXfocBs/FiQJ/HzjDEAAAAASUVORK5CYII=",X=document.querySelector("canvas"),u=X.getContext("2d");class z{constructor({position:e,velocity:t}){this.position=e,this.velocity=t,this.width=8,this.height=12}draw(){u.beginPath(),u.moveTo(this.position.x-this.width,this.position.y),u.lineTo(this.position.x+this.width,this.position.y),u.lineTo(this.position.x,this.position.y+this.height),u.closePath(),u.fillStyle="white",u.fill()}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}}const J=document.querySelector("canvas"),Q=J.getContext("2d");let S=1;innerWidth<500&&(S=.8);class U{constructor({position:e}){this.velocity={x:0,y:0},this.color="red";const t=new Image;t.src=F,t.onload=()=>{this.width=t.width*S,this.height=t.height*S,this.image=t,this.position={x:e.x,y:e.y}}}draw(){Q.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}update({velocity:e}){this.image&&(this.draw(),this.position.x+=e.x,this.position.y+=e.y)}shoot(e){e.push(new z({position:{x:this.position.x+this.width/2,y:this.position.y+this.height},velocity:{x:0,y:5}}))}}const k=document.querySelector("canvas");k.getContext("2d");let L=Math.ceil(Math.random()*7+3);innerWidth<500&&(L=Math.ceil(Math.random()+3));let q=Math.ceil(Math.random()*4+2);innerWidth<500&&(q=Math.ceil(Math.random()*2+1));class Y{constructor(){this.position={x:0,y:0},this.velocity={x:3,y:0},this.invaders=[],this.width=50*L,this.height=40*q;for(let e=0;e<q;e++)for(let t=0;t<L;t++)this.invaders.push(new U({position:{x:50*t,y:40*e}}))}update(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.y=0,(this.position.x>=k.width-this.width||this.position.x<=0)&&(this.velocity.x=-this.velocity.x,this.velocity.y=40)}}const D=document.querySelector("canvas"),l=D.getContext("2d");class T{constructor({position:e,velocity:t,radio:h,color:o,fades:n}){this.position=e,this.velocity=t,this.radio=h,this.color=o,this.opacity=1,this.fades=n}draw(){l.save(),l.globalAlpha=this.opacity,l.beginPath(),l.arc(this.position.x,this.position.y,this.radio,0,2*Math.PI),l.fillStyle=this.color,l.fill(),l.closePath(),l.restore()}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.fades||(this.opacity+=-.01)}}const K=document.querySelector("canvas"),m=K.getContext("2d");class H{constructor({position:e,velocity:t}){this.position=e,this.velocity=t,this.radio=5}draw(){m.beginPath(),m.arc(this.position.x,this.position.y,this.radio,0,2*Math.PI),m.closePath(),m.fillStyle="yellow",m.fill()}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}}const _="/SpaceInvaders/assets/aim.466a63a9.svg",P="/SpaceInvaders/assets/left-arrow.cc66669f.svg",C="/SpaceInvaders/assets/right-arrow.9e9b88f8.svg",r=document.querySelector("canvas"),M=r.getContext("2d");r.width=innerWidth;r.height=innerHeight;innerWidth<500&&(r.height=innerHeight-2*80);const G=s=>{const e={ArrowLeft:!1,ArrowRight:!1},t=new V(s),h=[];let o=[],n=[];const d=[],E=[];let g=0,A=Math.ceil(Math.random()*500+400),w={over:!1,active:!0},x=0;if(document.querySelector("#app").innerHTML=`
    <div id="scoreBox">Score: <span id="score">${x}</span></div>
  
  `,console.log(score.innerHTML),innerWidth<500&&(document.querySelector("#app").innerHTML+=`
    <div id='mobil'>
        <div>
          <button><img src=${P}></img></button>
          <button><img src=${C}></img></button>
        </div>
        <button><img src=${_}></img></button>
        </div>
        `,innerWidth<500)){const i=document.querySelectorAll("#mobil button");i[0].addEventListener("touchstart",()=>{console.log("gola"),e.ArrowLeft=!0}),i[0].addEventListener("touchend",()=>{e.ArrowLeft=!1}),i[1].addEventListener("touchstart",()=>{e.ArrowRight=!0}),i[1].addEventListener("touchend",()=>{e.ArrowRight=!1}),i[2].addEventListener("touchstart",()=>{h.push(new H({position:{x:t.position.x+t.width/2,y:t.position.y},velocity:{x:0,y:-10}}))})}for(let i=0;i<100;i++)E.push(new T({position:{x:Math.random()*r.width,y:Math.random()*r.height},velocity:{x:0,y:1},radio:Math.random()*3,color:"white",fades:!0}));function I({object:i}){for(let a=0;a<10;a++)d.push(new T({position:{x:i.position.x+i.width/2,y:i.position.y+i.height/2},velocity:{x:(Math.random()-.5)*2,y:(Math.random()-.5)*2},radio:Math.random()*3+3,color:i.color}))}function $(){!w.active||(requestAnimationFrame($),M.fillStyle="black",M.fillRect(0,0,r.width,r.height),E.forEach(i=>{i.position.y-i.radio>=r.height&&(i.position.x=Math.random()*r.width,i.position.y=0),i.update()}),t.update(),d.forEach((i,a)=>{i.opacity<=.01?setTimeout(()=>{d.splice(a,1)},0):i.update()}),n.forEach((i,a)=>{i.position.y>=r.height?setTimeout(()=>{n.splice(a,1)},0):i.update(),i.position.y+i.height>=t.position.y&&i.position.y<=t.position.y+t.height&&i.position.x+2*i.width>=t.position.x&&i.position.x<=t.position.x+t.width&&(n.splice(a,1),t.opacity=0,I({object:t}),t.height=0,t.width=0,w.over=!0,setTimeout(()=>{w.active=!1,document.querySelector("#app").innerHTML+=`
                        <div id="GO">
                            <h2>Game Over</h2>
                            <p>Your Score is: ${x} </p>
                            <button id="playAgain">Play Again</button>
                            <button id='ship'>Choose Ship</button>
                        </div>
                    `,document.getElementById("ship").addEventListener("click",()=>{document.querySelector("#GO").remove(),M.clearRect(0,0,r.width,r.height),W()}),document.querySelector("#playAgain").addEventListener("click",()=>{G(s)})},2e3))}),h.forEach((i,a)=>{i.position.y+i.radio<=0?setTimeout(()=>{h.splice(a,1)},0):i.update()}),o.forEach((i,a)=>{i.update(),g%50==0&&i.invaders.length>0&&i.invaders[Math.floor(Math.random()*i.invaders.length)].shoot(n),i.invaders.forEach((c,Z)=>{c.update({velocity:i.velocity}),h.forEach((y,N)=>{y.position.y>=c.position.y&&y.position.y+2*y.radio<=c.position.y+c.height&&y.position.x>=c.position.x&&y.position.x+2*y.radio<=c.position.x+c.width&&(I({object:c}),i.invaders.splice(Z,1),h.splice(N,1),x+=100,score.innerHTML=x)})}),i.invaders.length==0&&o.splice(a,1),o.length===0&&(g=A-1)}),e.ArrowLeft&&t.position.x>=0?(t.velocity=-7,t.rotation=-.2):e.ArrowRight&&t.position.x<=r.width-t.width?(t.velocity=7,t.rotation=.2):(t.velocity=0,t.rotation=0),g%A==0&&(o.push(new Y),A=Math.ceil(Math.random()*500+800),g=0),g++)}$(),addEventListener("keydown",({key:i})=>{if(!w.over)switch(i){case"a":case"ArrowLeft":e.ArrowLeft=!0;break;case"d":case"ArrowRight":e.ArrowRight=!0;break;case" ":{h.push(new H({position:{x:t.position.x+t.width/2,y:t.position.y},velocity:{x:0,y:-10}}));break}case"f":{console.log(t.height,t.width,t.position.x);break}}}),addEventListener("keyup",({key:i})=>{switch(i){case"a":case"ArrowLeft":e.ArrowLeft=!1;break;case"d":case"ArrowRight":e.ArrowRight=!1;break}})},W=()=>{document.querySelector("#app").innerHTML+=`
      <div id='selector'>
        <div class='card'><img src=${b}></img></div>
        <div id='btn-sele'>
          <button><img src=${P}></img></button>
          <button>Play</button>
          <button><img src=${C}></img></button>
        <div/>
      <div/>
  `;let s=0;const e=[b,O,R],t=document.querySelector(".card"),h=document.querySelectorAll("#btn-sele>button");h[0].addEventListener("click",()=>{t.innerHTML=`<img class='shipOutLeft' src=${e[s]}></img>`,s==0&&(s=3),s--,t.innerHTML+=`<img class='shipInLeft' src=${e[s]}></img>`,setTimeout(()=>{document.querySelector(".shipOutLeft").remove()},500)}),h[2].addEventListener("click",()=>{t.innerHTML=`<img class='shipOutRight' src=${e[s]}></img>`,s=(s+1)%3,t.innerHTML+=`<img class='shipInRight' src=${e[s]}></img>`,setTimeout(()=>{document.querySelector(".shipOutRight").remove()},500)}),h[1].addEventListener("click",()=>{document.querySelector("#selector").remove(),G(s)})};W();
