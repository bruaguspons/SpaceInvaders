(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))e(h);new MutationObserver(h=>{for(const s of h)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function i(h){const s={};return h.integrity&&(s.integrity=h.integrity),h.referrerpolicy&&(s.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?s.credentials="include":h.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(h){if(h.ep)return;h.ep=!0;const s=i(h);fetch(h.href,s)}})();const $="/SpaceInvaders/assets/ship1.c6e0c1aa.png",H="/SpaceInvaders/assets/ship2.14f3173b.png",O="/SpaceInvaders/assets/ship3.2e642a9d.png",E=document.querySelector("canvas");class F{constructor({position:t,img:i,color:e,scale:h}){this.color=e,this.velocity={x:0,y:0},this.opacity=1;const s=new Image;s.src=i,s.onload=()=>{var r,u;this.width=s.width*h,this.height=s.height*h,this.image=s,this.position={x:(r=t==null?void 0:t.x)!=null?r:E.width/2-this.width/2,y:(u=t==null?void 0:t.y)!=null?u:E.height-this.height-20}}}update({velocity:t,opacity:i,dimentions:e}){var h,s,r,u;this.image&&(this.draw(),this.velocity.x=(h=t==null?void 0:t.x)!=null?h:this.velocity.x,this.velocity.y=(s=t==null?void 0:t.y)!=null?s:this.velocity.y,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.opacity=i!=null?i:this.opacity,this.width=(r=e==null?void 0:e.w)!=null?r:this.width,this.height=(u=e==null?void 0:e.h)!=null?u:this.height)}getPosition(){return[this.position.x,this.position.y]}getDimentions(){return[this.width,this.height]}}const K=[$,H,O],Y=document.querySelector("canvas"),f=Y.getContext("2d");let W=.3;innerWidth<500&&(W=.2);class z extends F{constructor(t){super({img:K[t],color:"orange",scale:W}),this.rotation=0}draw(){f.save(),f.globalAlpha=this.opacity,f.translate(this.position.x+this.width/2,this.position.y+this.height/2),f.rotate(this.rotation),f.translate(-this.position.x-this.width/2,-this.position.y-this.height/2),f.drawImage(this.image,this.position.x,this.position.y,this.width,this.height),f.restore()}updateRotation(t){this.rotation=t}}const J="/SpaceInvaders/assets/invaderB.2782931f.svg",Q="/SpaceInvaders/assets/invaderR.171df9da.svg",U="/SpaceInvaders/assets/invaderG.80524a85.svg",V=document.querySelector("canvas"),m=V.getContext("2d");class X{constructor({position:t,velocity:i,color:e}){this.position=t,this.velocity=i,this.color=e,this.width=8,this.height=12}draw(){m.beginPath(),m.moveTo(this.position.x-this.width,this.position.y),m.lineTo(this.position.x+this.width,this.position.y),m.lineTo(this.position.x,this.position.y+this.height),m.closePath(),m.fillStyle=this.color,m.fill()}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}}const Z=document.querySelector("canvas"),_=Z.getContext("2d"),M=new Map;M.set("blue",J);M.set("red",Q);M.set("green",U);let q=.28;innerWidth<500&&(q=.2);class j{constructor({position:t,color:i}){this.color=i,this.velocity={x:0,y:0},this.opacity=1;const e=new Image;e.src=M.get(i),e.onload=()=>{this.width=e.width*q,this.height=e.height*q,this.image=e,this.position={x:t.x,y:t.y}}}draw(){_.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}shoot(t){t.push(new X({position:{x:this.position.x+this.width/2,y:this.position.y+this.height},velocity:{x:0,y:5},color:this.color}))}update({velocity:t,opacity:i,dimentions:e}){var h,s,r,u;this.image&&(this.draw(),this.velocity.x=(h=t==null?void 0:t.x)!=null?h:this.velocity.x,this.velocity.y=(s=t==null?void 0:t.y)!=null?s:this.velocity.y,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.opacity=i!=null?i:this.opacity,this.width=(r=e==null?void 0:e.w)!=null?r:this.width,this.height=(u=e==null?void 0:e.h)!=null?u:this.height)}getPosition(){return[this.position.x,this.position.y]}getDimentions(){return[this.width,this.height]}}const C=document.querySelector("canvas");C.getContext("2d");class tt{constructor(){let t=Math.ceil(Math.random()*7+3);innerWidth<500&&(t=Math.ceil(Math.random()+3));let i=Math.ceil(Math.random()*4+2);innerWidth<500&&(i=Math.ceil(Math.random()*2+1));const e=["red","blue","green"],h=Math.floor(Math.random()*3)%3;this.position={x:0,y:0},this.velocity={x:3,y:0},this.invaders=[],this.width=50*t,this.height=40*i;for(let s=0;s<i;s++)for(let r=0;r<t;r++)this.invaders.push(new j({position:{x:50*r,y:40*s},color:e[h]}))}update(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.y=0,(this.position.x>=C.width-this.width||this.position.x<=0)&&(this.velocity.x=-this.velocity.x,this.velocity.y=40)}}const it=document.querySelector("canvas"),y=it.getContext("2d");class T{constructor({position:t,velocity:i,radio:e,color:h,fades:s}){this.position=t,this.velocity=i,this.radio=e,this.color=h,this.opacity=1,this.fades=s}draw(){y.save(),y.globalAlpha=this.opacity,y.beginPath(),y.arc(this.position.x,this.position.y,this.radio,0,2*Math.PI),y.fillStyle=this.color,y.fill(),y.closePath(),y.restore()}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.fades||(this.opacity+=-.01)}}const et=document.querySelector("canvas"),w=et.getContext("2d");class k{constructor({position:t,velocity:i}){this.position=t,this.velocity=i,this.radio=5}draw(){w.beginPath(),w.arc(this.position.x,this.position.y,this.radio,0,2*Math.PI),w.closePath(),w.fillStyle="yellow",w.fill()}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}}const st="/SpaceInvaders/assets/aim.466a63a9.svg",G="/SpaceInvaders/assets/left-arrow.cc66669f.svg",D="/SpaceInvaders/assets/right-arrow.9e9b88f8.svg",c=document.querySelector("canvas"),L=c.getContext("2d");c.width=innerWidth;c.height=innerHeight;innerWidth<500&&(c.height=innerHeight-2*80);const B=n=>{const t={ArrowLeft:!1,ArrowRight:!1},i=new z(n),e=[];let h=[],s=[];const r=[],u=[];let v=0,A=Math.ceil(Math.random()*500+400),x={over:!1,active:!0},S=0;if(document.querySelector("#app").innerHTML=`
    <div id="scoreBox">Score: <span id="score">${S}</span></div>
  
  `,console.log(score.innerHTML),innerWidth<500&&(document.querySelector("#app").innerHTML+=`
    <div id='mobil'>
        <div>
          <button><img src=${G}></img></button>
          <button><img src=${D}></img></button>
        </div>
        <button><img src=${st}></img></button>
        </div>
        `,innerWidth<500)){const a=document.querySelectorAll("#mobil button");a[0].addEventListener("touchstart",()=>{console.log("gola"),t.ArrowLeft=!0}),a[0].addEventListener("touchend",()=>{t.ArrowLeft=!1}),a[1].addEventListener("touchstart",()=>{t.ArrowRight=!0}),a[1].addEventListener("touchend",()=>{t.ArrowRight=!1}),a[2].addEventListener("touchstart",()=>{const[g,o]=i.getPosition(),[d,l]=i.getDimentions();e.push(new k({position:{x:g+d/2,y:o},velocity:{x:0,y:-10}}))})}for(let a=0;a<100;a++)u.push(new T({position:{x:Math.random()*c.width,y:Math.random()*c.height},velocity:{x:0,y:1},radio:Math.random()*3,color:"white",fades:!0}));function P({object:a}){for(let g=0;g<10;g++)r.push(new T({position:{x:a.position.x+a.width/2,y:a.position.y+a.height/2},velocity:{x:(Math.random()-.5)*2,y:(Math.random()-.5)*2},radio:Math.random()*3+3,color:a.color}))}function R(){if(!x.active)return;requestAnimationFrame(R),L.fillStyle="black",L.fillRect(0,0,c.width,c.height),u.forEach(o=>{o.position.y-o.radio>=c.height&&(o.position.x=Math.random()*c.width,o.position.y=0),o.update()}),i.update({}),r.forEach((o,d)=>{o.opacity<=.01?setTimeout(()=>{r.splice(d,1)},0):o.update()}),s.forEach((o,d)=>{const[l,b]=i.getPosition(),[p,I]=i.getDimentions();o.position.y>=c.height?setTimeout(()=>{s.splice(d,1)},0):o.update(),o.position.y+o.height>=b&&o.position.y<=b+I&&o.position.x+2*o.width>=l&&o.position.x<=l+p&&(s.splice(d,1),P({object:i}),i.update({opacity:0,dimentions:{w:0,h:0}}),x.over=!0,setTimeout(()=>{x.active=!1,document.querySelector("#app").innerHTML+=`
                        <div id="GO">
                            <h2>Game Over</h2>
                            <p>Your Score is: ${S} </p>
                            <button id="playAgain">Play Again</button>
                            <button id='ship'>Choose Ship</button>
                        </div>
                    `,document.getElementById("ship").addEventListener("click",()=>{document.querySelector("#GO").remove(),document.querySelector("#scoreBox").remove(),innerWidth<500&&document.querySelector("#mobil").remove(),L.clearRect(0,0,c.width,c.height),N()}),document.querySelector("#playAgain").addEventListener("click",()=>{L.clearRect(0,0,c.width,c.height),B(n)})},2e3))}),e.forEach((o,d)=>{o.position.y+o.radio<=0?setTimeout(()=>{e.splice(d,1)},0):o.update()}),h.forEach((o,d)=>{o.update(),v%50==0&&o.invaders.length>0&&o.invaders[Math.floor(Math.random()*o.invaders.length)].shoot(s),o.invaders.forEach((l,b)=>{l.update({velocity:o.velocity}),e.forEach((p,I)=>{p.position.y>=l.position.y&&p.position.y+2*p.radio<=l.position.y+l.height&&p.position.x>=l.position.x&&p.position.x+2*p.radio<=l.position.x+l.width&&(P({object:l}),o.invaders.splice(b,1),e.splice(I,1),S+=100,score.innerHTML=S)})}),o.invaders.length==0&&h.splice(d,1),h.length===0&&(v=A-1)});const[a,g]=i.getDimentions();t.ArrowLeft&&i.position.x>=0?(i.update({velocity:{x:-7}}),i.updateRotation(-.2)):t.ArrowRight&&i.position.x<=c.width-a?(i.update({velocity:{x:7}}),i.updateRotation(.2)):(i.update({velocity:{x:0}}),i.updateRotation(0)),v%A==0&&(h.push(new tt),A=Math.ceil(Math.random()*500+800),v=0),v++}R(),addEventListener("keydown",({key:a})=>{const[g,o]=i.getPosition(),[d,l]=i.getDimentions();if(!x.over)switch(a){case"a":case"ArrowLeft":t.ArrowLeft=!0;break;case"d":case"ArrowRight":t.ArrowRight=!0;break;case" ":{e.push(new k({position:{x:g+d/2,y:o},velocity:{x:0,y:-10}}));break}}}),addEventListener("keyup",({key:a})=>{switch(a){case"a":case"ArrowLeft":t.ArrowLeft=!1;break;case"d":case"ArrowRight":t.ArrowRight=!1;break}})},N=()=>{document.querySelector("#app").innerHTML+=`
      <div id='selector'>
        <h2>Select your ship:</h2>
        <div class='card'><img src=${$}></img></div>
        <div id='btn-sele'>
          <button><img src=${G}></img></button>
          <button>Play</button>
          <button><img src=${D}></img></button>
        <div/>
      <div/>
  `;let n=0;const t=[$,H,O],i=document.querySelector(".card"),e=document.querySelectorAll("#btn-sele>button");e[0].addEventListener("click",()=>{i.innerHTML=`<img class='shipOutRight' src=${t[n]}></img>`,n==0&&(n=3),n--,i.innerHTML+=`<img class='shipInRight' src=${t[n]}></img>`,setTimeout(()=>{document.querySelector(".shipOutRight").remove()},500)}),e[2].addEventListener("click",()=>{i.innerHTML=`<img class='shipOutLeft' src=${t[n]}></img>`,n=(n+1)%3,i.innerHTML+=`<img class='shipInLeft' src=${t[n]}></img>`,setTimeout(()=>{document.querySelector(".shipOutLeft").remove()},500)}),e[1].addEventListener("click",()=>{document.querySelector("#selector").remove(),B(n)})};N();
