(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const h of e)if(h.type==="childList")for(const y of h.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&r(y)}).observe(document,{childList:!0,subtree:!0});function o(e){const h={};return e.integrity&&(h.integrity=e.integrity),e.referrerpolicy&&(h.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?h.credentials="include":e.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(e){if(e.ep)return;e.ep=!0;const h=o(e);fetch(e.href,h)}})();const C="/SpaceInvaders/assets/ship3.2e642a9d.png",w=document.querySelector("canvas"),d=w.getContext("2d");let m=.3;innerWidth<500&&(m=.2);class R{constructor(){this.velocity=0,this.rotation=0,this.color="orange",this.opacity=1;const t=new Image;t.src=C,t.onload=()=>{this.width=t.width*m,this.height=t.height*m,this.image=t,this.position={x:w.width/2-this.width/2,y:w.height-this.height-20}}}draw(){d.save(),d.globalAlpha=this.opacity,d.translate(this.position.x+this.width/2,this.position.y+this.height/2),d.rotate(this.rotation),d.translate(-this.position.x-this.width/2,-this.position.y-this.height/2),d.drawImage(this.image,this.position.x,this.position.y,this.width,this.height),d.restore()}update(){this.image&&(this.draw(),this.position.x+=this.velocity)}reset(){this.width=this.image.width*m,this.height=this.image.height*m,this.position={x:w.width/2-this.width/2,y:w.height-this.height-20},this.opacity=1}}const T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAAAXNSR0IArs4c6QAAAPFJREFUWEftWNsNhDAMC/Ow/yg3z/GFBNFdXGOoRGt+aZr4kZSyxEDPMhCWmBfMJ+J7VHKNe8lQ96eUUZMhS6v7G8zO8Kttlm2i2kKNz/VQNjOYouutTEEOZbPMJBq16nt2wBiMynhrvJX5xxTqkcwcWp/zsPFIqbJnUHFsMQZzYGBeZZCtWqdQr3VZqVPPGEwvGX7kmVcZdfSqoqH8lDJoM7VYFI/yG8zOYO9p11UZdCIjG7HXcHQzLc8Zlhm2eIMpvtXGVYa1CRoIyKboSsDWQ/0DQB5HxbHgDYZloPXceZXNrpLwVJzUM08VdXXfocBs/FiQJ/HzjDEAAAAASUVORK5CYII=",H=document.querySelector("canvas"),p=H.getContext("2d");class N{constructor({position:t,velocity:o}){this.position=t,this.velocity=o,this.width=8,this.height=12}draw(){p.beginPath(),p.moveTo(this.position.x-this.width,this.position.y),p.lineTo(this.position.x+this.width,this.position.y),p.lineTo(this.position.x,this.position.y+this.height),p.closePath(),p.fillStyle="white",p.fill()}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}}const W=document.querySelector("canvas"),Z=W.getContext("2d");let A=1;innerWidth<500&&(A=.8);class V{constructor({position:t}){this.velocity={x:0,y:0},this.color="red";const o=new Image;o.src=T,o.onload=()=>{this.width=o.width*A,this.height=o.height*A,this.image=o,this.position={x:t.x,y:t.y}}}draw(){Z.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}update({velocity:t}){this.image&&(this.draw(),this.position.x+=t.x,this.position.y+=t.y)}shoot(t){t.push(new N({position:{x:this.position.x+this.width/2,y:this.position.y+this.height},velocity:{x:0,y:5}}))}}const O=document.querySelector("canvas");O.getContext("2d");let M=Math.ceil(Math.random()*7+3);innerWidth<500&&(M=Math.ceil(Math.random()+3));let b=Math.ceil(Math.random()*4+2);innerWidth<500&&(b=Math.ceil(Math.random()*2+1));class B{constructor(){this.position={x:0,y:0},this.velocity={x:3,y:0},this.invaders=[],this.width=50*M,this.height=40*b;for(let t=0;t<b;t++)for(let o=0;o<M;o++)this.invaders.push(new V({position:{x:50*o,y:40*t}}))}update(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.y=0,(this.position.x>=O.width-this.width||this.position.x<=0)&&(this.velocity.x=-this.velocity.x,this.velocity.y=40)}}const F=document.querySelector("canvas"),l=F.getContext("2d");class q{constructor({position:t,velocity:o,radio:r,color:e,fades:h}){this.position=t,this.velocity=o,this.radio=r,this.color=e,this.opacity=1,this.fades=h}draw(){l.save(),l.globalAlpha=this.opacity,l.beginPath(),l.arc(this.position.x,this.position.y,this.radio,0,2*Math.PI),l.fillStyle=this.color,l.fill(),l.closePath(),l.restore()}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.fades||(this.opacity+=-.01)}}const X=document.querySelector("canvas"),g=X.getContext("2d");class I{constructor({position:t,velocity:o}){this.position=t,this.velocity=o,this.radio=5}draw(){g.beginPath(),g.arc(this.position.x,this.position.y,this.radio,0,2*Math.PI),g.closePath(),g.fillStyle="yellow",g.fill()}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}}const z="/SpaceInvaders/assets/aim.466a63a9.svg",J="/SpaceInvaders/assets/left-arrow.cc66669f.svg",Q="/SpaceInvaders/assets/right-arrow.9e9b88f8.svg",a=document.querySelector("canvas"),G=a.getContext("2d");a.width=innerWidth;a.height=innerHeight-2*40;const P=()=>{const s={ArrowLeft:!1,ArrowRight:!1},t=new R,o=[];let r=[],e=[];const h=[],y=[];let v=0,S=Math.ceil(Math.random()*500+400),x={over:!1,active:!0},f=0;if(document.querySelector("#app").innerHTML=`
    <div id="scoreBox">Score: <span id="score">${f}</span></div>
  
  `,console.log(score.innerHTML),innerWidth<500&&(document.querySelector("#app").innerHTML+=`
    <div id='mobil'>
        <div>
          <button><img src=${J}></img></button>
          <button><img src=${Q}></img></button>
        </div>
        <button><img src=${z}></img></button>
        </div>
        `,innerWidth<500)){const i=document.querySelectorAll("#mobil button");i[0].addEventListener("touchstart",()=>{console.log("gola"),s.ArrowLeft=!0}),i[0].addEventListener("touchend",()=>{s.ArrowLeft=!1}),i[1].addEventListener("touchstart",()=>{s.ArrowRight=!0}),i[1].addEventListener("touchend",()=>{s.ArrowRight=!1}),i[2].addEventListener("touchstart",()=>{o.push(new I({position:{x:t.position.x+t.width/2,y:t.position.y},velocity:{x:0,y:-10}}))})}for(let i=0;i<100;i++)y.push(new q({position:{x:Math.random()*a.width,y:Math.random()*a.height},velocity:{x:0,y:1},radio:Math.random()*3,color:"white",fades:!0}));function L({object:i}){for(let n=0;n<10;n++)h.push(new q({position:{x:i.position.x+i.width/2,y:i.position.y+i.height/2},velocity:{x:(Math.random()-.5)*2,y:(Math.random()-.5)*2},radio:Math.random()*3+3,color:i.color}))}function E(){!x.active||(requestAnimationFrame(E),G.fillStyle="black",G.fillRect(0,0,a.width,a.height),y.forEach(i=>{i.position.y-i.radio>=a.height&&(i.position.x=Math.random()*a.width,i.position.y=0),i.update()}),t.update(),h.forEach((i,n)=>{i.opacity<=.01?setTimeout(()=>{h.splice(n,1)},0):i.update()}),e.forEach((i,n)=>{i.position.y>=a.height?setTimeout(()=>{e.splice(n,1)},0):i.update(),i.position.y+i.height>=t.position.y&&i.position.y<=t.position.y+t.height&&i.position.x+2*i.width>=t.position.x&&i.position.x<=t.position.x+t.width&&(e.splice(n,1),t.opacity=0,L({object:t}),t.height=0,t.width=0,x.over=!0,setTimeout(()=>{x.active=!1,document.querySelector("#app").innerHTML+=`
          <div id="GO">
            <h2>Game Over</h2>
            <p>Your Score is: ${f} </p>
            <button id="btn-GO">Play Again</button>
          </div>
          `,document.querySelector("#btn-GO").addEventListener("click",()=>{document.querySelector("#GO").remove(),P()})},2e3))}),o.forEach((i,n)=>{i.position.y+i.radio<=0?setTimeout(()=>{o.splice(n,1)},0):i.update()}),r.forEach((i,n)=>{i.update(),v%50==0&&i.invaders.length>0&&i.invaders[Math.floor(Math.random()*i.invaders.length)].shoot(e),i.invaders.forEach((c,$)=>{c.update({velocity:i.velocity}),o.forEach((u,k)=>{u.position.y>=c.position.y&&u.position.y+2*u.radio<=c.position.y+c.height&&u.position.x>=c.position.x&&u.position.x+2*u.radio<=c.position.x+c.width&&(L({object:c}),setTimeout(()=>{i.invaders.splice($,1),o.splice(k,1)}),f+=100,console.log(f),score.innerHTML=f,console.log(score))})}),i.invaders.length==0&&r.splice(n,1)}),s.ArrowLeft&&t.position.x>=0?(t.velocity=-7,t.rotation=-.2):s.ArrowRight&&t.position.x<=a.width-t.width?(t.velocity=7,t.rotation=.2):(t.velocity=0,t.rotation=0),v%S==0&&(r.push(new B),S=Math.ceil(Math.random()*500+800),v=0),v++)}E(),addEventListener("keydown",({key:i})=>{if(!x.over)switch(i){case"a":case"ArrowLeft":s.ArrowLeft=!0;break;case"d":case"ArrowRight":s.ArrowRight=!0;break;case" ":{o.push(new I({position:{x:t.position.x+t.width/2,y:t.position.y},velocity:{x:0,y:-10}}));break}case"f":{console.log(t.height,t.width,t.position.x);break}}}),addEventListener("keyup",({key:i})=>{switch(i){case"a":case"ArrowLeft":s.ArrowLeft=!1;break;case"d":case"ArrowRight":s.ArrowRight=!1;break}})};P();
