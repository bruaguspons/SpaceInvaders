(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const h of e)if(h.type==="childList")for(const A of h.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&a(A)}).observe(document,{childList:!0,subtree:!0});function s(e){const h={};return e.integrity&&(h.integrity=e.integrity),e.referrerpolicy&&(h.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?h.credentials="include":e.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(e){if(e.ep)return;e.ep=!0;const h=s(e);fetch(e.href,h)}})();const N="/SpaceInvaders/assets/ship3.2e642a9d.png",g=document.querySelector("canvas"),l=g.getContext("2d");let m=.3;innerWidth<500&&(m=.2);class Z{constructor(){this.velocity=0,this.rotation=0,this.color="orange",this.opacity=1;const i=new Image;i.src=N,i.onload=()=>{this.width=i.width*m,this.height=i.height*m,this.image=i,this.position={x:g.width/2-this.width/2,y:g.height-this.height-20}}}draw(){l.save(),l.globalAlpha=this.opacity,l.translate(this.position.x+this.width/2,this.position.y+this.height/2),l.rotate(this.rotation),l.translate(-this.position.x-this.width/2,-this.position.y-this.height/2),l.drawImage(this.image,this.position.x,this.position.y,this.width,this.height),l.restore()}update(){this.image&&(this.draw(),this.position.x+=this.velocity)}reset(){this.width=this.image.width*m,this.height=this.image.height*m,this.position={x:g.width/2-this.width/2,y:g.height-this.height-20},this.opacity=1}}const T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAAAXNSR0IArs4c6QAAAPFJREFUWEftWNsNhDAMC/Ow/yg3z/GFBNFdXGOoRGt+aZr4kZSyxEDPMhCWmBfMJ+J7VHKNe8lQ96eUUZMhS6v7G8zO8Kttlm2i2kKNz/VQNjOYouutTEEOZbPMJBq16nt2wBiMynhrvJX5xxTqkcwcWp/zsPFIqbJnUHFsMQZzYGBeZZCtWqdQr3VZqVPPGEwvGX7kmVcZdfSqoqH8lDJoM7VYFI/yG8zOYO9p11UZdCIjG7HXcHQzLc8Zlhm2eIMpvtXGVYa1CRoIyKboSsDWQ/0DQB5HxbHgDYZloPXceZXNrpLwVJzUM08VdXXfocBs/FiQJ/HzjDEAAAAASUVORK5CYII=",$=document.querySelector("canvas"),d=$.getContext("2d");class H{constructor({position:i,velocity:s}){this.position=i,this.velocity=s,this.width=8,this.height=12}draw(){d.beginPath(),d.moveTo(this.position.x-this.width,this.position.y),d.lineTo(this.position.x+this.width,this.position.y),d.lineTo(this.position.x,this.position.y+this.height),d.closePath(),d.fillStyle="white",d.fill()}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}}const V=document.querySelector("canvas"),F=V.getContext("2d");let S=1;innerWidth<500&&(S=.8);class W{constructor({position:i}){this.velocity={x:0,y:0},this.color="red";const s=new Image;s.src=T,s.onload=()=>{this.width=s.width*S,this.height=s.height*S,this.image=s,this.position={x:i.x,y:i.y}}}draw(){F.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}update({velocity:i}){this.image&&(this.draw(),this.position.x+=i.x,this.position.y+=i.y)}shoot(i){i.push(new H({position:{x:this.position.x+this.width/2,y:this.position.y+this.height},velocity:{x:0,y:5}}))}}const C=document.querySelector("canvas");C.getContext("2d");class b{constructor(){this.position={x:0,y:0},this.velocity={x:3,y:0},this.invaders=[];const i=Math.ceil(Math.random()*4+2);let s=Math.ceil(Math.random()*7+3);innerWidth<500&&(s=Math.ceil(Math.random()+3)),this.width=50*s,this.height=40*i;for(let a=0;a<i;a++)for(let e=0;e<s;e++)this.invaders.push(new W({position:{x:50*e,y:40*a}}))}update(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.y=0,(this.position.x>=C.width-this.width||this.position.x<=0)&&(this.velocity.x=-this.velocity.x,this.velocity.y=40)}}const X=document.querySelector("canvas"),c=X.getContext("2d");class O{constructor({position:i,velocity:s,radio:a,color:e,fades:h}){this.position=i,this.velocity=s,this.radio=a,this.color=e,this.opacity=1,this.fades=h}draw(){c.save(),c.globalAlpha=this.opacity,c.beginPath(),c.arc(this.position.x,this.position.y,this.radio,0,2*Math.PI),c.fillStyle=this.color,c.fill(),c.closePath(),c.restore()}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.fades||(this.opacity+=-.01)}}const z=document.querySelector("canvas"),u=z.getContext("2d");class R{constructor({position:i,velocity:s}){this.position=i,this.velocity=s,this.radio=5}draw(){u.beginPath(),u.arc(this.position.x,this.position.y,this.radio,0,2*Math.PI),u.closePath(),u.fillStyle="yellow",u.fill()}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}}const q=document.querySelector("#score"),n=document.querySelector("canvas"),I=n.getContext("2d");n.width=innerWidth;n.height=innerHeight;const r={ArrowLeft:!1,ArrowRight:!1},o=new Z,y=[];let f=[],w=[];const L=[],G=[];let v=0,P=Math.ceil(Math.random()*500+400),p={over:!1,active:!0},M=0;for(let t=0;t<100;t++)G.push(new O({position:{x:Math.random()*n.width,y:Math.random()*n.height},velocity:{x:0,y:1},radio:Math.random()*3,color:"white",fades:!0}));function k({object:t}){for(let i=0;i<10;i++)L.push(new O({position:{x:t.position.x+t.width/2,y:t.position.y+t.height/2},velocity:{x:(Math.random()-.5)*2,y:(Math.random()-.5)*2},radio:Math.random()*3+3,color:t.color}))}function E(){!p.active||(requestAnimationFrame(E),I.fillStyle="black",I.fillRect(0,0,n.width,n.height),G.forEach(t=>{t.position.y-t.radio>=n.height&&(t.position.x=Math.random()*n.width,t.position.y=0),t.update()}),o.update(),L.forEach((t,i)=>{t.opacity<=.01?setTimeout(()=>{L.splice(i,1)},0):t.update()}),w.forEach((t,i)=>{t.position.y>=n.height?setTimeout(()=>{w.splice(i,1)},0):t.update(),t.position.y+t.height>=o.position.y&&t.position.y<=o.position.y+o.height&&t.position.x+2*t.width>=o.position.x&&t.position.x<=o.position.x+o.width&&(w.splice(i,1),o.opacity=0,k({object:o}),o.height=0,o.width=0,p.over=!0,setTimeout(()=>{p.active=!1,document.querySelector("#btn-GO").addEventListener("click",()=>{console.log("hola"),p.active=!0,p.over=!1,q.innerHTML=0,w=[],f=[],f.push(new b),o.reset(),document.querySelector("#GO").remove(),E()})},2e3))}),y.forEach((t,i)=>{t.position.y+t.radio<=0?setTimeout(()=>{y.splice(i,1)},0):t.update()}),f.forEach((t,i)=>{t.update(),v%50==0&&t.invaders.length>0&&t.invaders[Math.floor(Math.random()*t.invaders.length)].shoot(w),t.invaders.forEach((s,a)=>{s.update({velocity:t.velocity}),y.forEach((e,h)=>{e.position.y>=s.position.y&&e.position.y+2*e.radio<=s.position.y+s.height&&e.position.x>=s.position.x&&e.position.x+2*e.radio<=s.position.x+s.width&&(k({object:s}),setTimeout(()=>{t.invaders.splice(a,1),y.splice(h,1)}),M+=100,console.log(M),q.innerHTML=M)})}),t.invaders.length==0&&f.splice(i,1)}),r.ArrowLeft&&o.position.x>=0?(o.velocity=-7,o.rotation=-.2):r.ArrowRight&&o.position.x<=n.width-o.width?(o.velocity=7,o.rotation=.2):(o.velocity=0,o.rotation=0),v%P==0&&(f.push(new b),P=Math.ceil(Math.random()*500+800),v=0),v++)}E();addEventListener("keydown",({key:t})=>{if(!p.over)switch(t){case"a":case"ArrowLeft":r.ArrowLeft=!0;break;case"d":case"ArrowRight":r.ArrowRight=!0;break;case" ":{y.push(new R({position:{x:o.position.x+o.width/2,y:o.position.y},velocity:{x:0,y:-10}}));break}case"f":{console.log(o.height,o.width,o.position.x);break}}});addEventListener("keyup",({key:t})=>{switch(t){case"a":case"ArrowLeft":r.ArrowLeft=!1;break;case"d":case"ArrowRight":r.ArrowRight=!1;break}});const x=document.querySelectorAll("#mobil button");x[0].addEventListener("touchstart",()=>{r.ArrowLeft=!0});x[0].addEventListener("touchend",()=>{r.ArrowLeft=!1});x[1].addEventListener("touchstart",()=>{r.ArrowRight=!0});x[1].addEventListener("touchend",()=>{r.ArrowRight=!1});x[2].addEventListener("touchstart",()=>{y.push(new R({position:{x:o.position.x+o.width/2,y:o.position.y},velocity:{x:0,y:-10}}))});
